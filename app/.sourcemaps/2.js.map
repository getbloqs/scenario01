{"version":3,"sources":["../../src/pages/bet-detail/bet-detail.module.ts","../../src/pages/bet-detail/bet-detail.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BetDetailPage } from './bet-detail';\n\n@NgModule({\n  declarations: [\n    BetDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BetDetailPage),\n  ],\n})\nexport class BetDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bet-detail/bet-detail.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavParams, ModalController, AlertController } from 'ionic-angular';\nimport { SportsBettingService } from '../../services/index';\n\n@IonicPage({\n    name : 'bet-detail' ,\n    segment : 'bet-detail/:address' ,\n    defaultHistory: ['bet-overview']\n})\n@Component({\n    selector: 'page-bet-detail',\n    templateUrl: 'bet-detail.html',\n})\nexport class BetDetailPage {\n\n    betContract:any;\n\n    bet = {\n        game : '' ,\n        total : 0 ,\n        address : '' ,\n        owner : '' ,\n        winningTip : 0 ,\n        endOfBetting : new Date() ,\n        tipAmounts : [0,0,0] ,\n        odds : [0,0,0]\n    };\n\n    yourBet = {\n        tip : 3 ,\n        amount : 1000\n    };\n\n    constructor(public navParams: NavParams, protected modalController:ModalController, protected alertController:AlertController, protected sportsBettingService:SportsBettingService) {\n        this.bet.address = navParams.get('address');\n    }\n\n    isFinalized() : boolean {\n        return this.bet.winningTip > 0;\n    }\n\n    canBet() : boolean {\n        return this.bet.endOfBetting.getTime() > (new Date()).getTime();\n    }\n\n    loadData() {\n        this.sportsBettingService.getBetData(this.betContract, [{\n            name : 'game'\n        }, {\n            name : 'endOfBetting' ,\n            format : (input) => { return new Date(input.toNumber() * 1000); }\n        }, {\n            name : 'total',\n            format : (input) => { return this.sportsBettingService.web3.fromWei(input, 'ether'); }\n        }, {\n            name : 'winningTip'\n        }, {\n            name : 'owner'\n        }]).then(data => {\n            for (let key in data) {\n                this.bet[key] = data[key];\n            }\n            return this.sportsBettingService.getOdds(this.betContract);\n        }).then(odds => {\n            this.bet.odds = odds;\n            return this.sportsBettingService.getAmounts(this.betContract);\n        }).then(amounts => {\n            this.bet.tipAmounts = amounts;\n            return this.sportsBettingService.retrieveBet(this.betContract);\n        }).then(yourBet => {\n            this.yourBet = yourBet;\n        }).catch(err => {\n            console.error(err);\n        });\n    }\n\n    ionViewWillEnter() {\n        this.sportsBettingService.getBetAt(this.bet.address).then((betContract) => {\n            this.betContract = betContract;\n            this.loadData();\n        });\n    }\n\n    takeABet() {\n        let modal = this.modalController.create('bet-form');\n\n        modal.present();\n\n        modal.onDidDismiss((data) => {\n            if (data && data.tip > 0 && data.amount > 0) {\n                this.sportsBettingService.bet(this.betContract, data.tip, data.amount).then(() => {\n                    this.loadData();\n                });\n            }\n        });\n    }\n\n    finalizeBet() {\n        let alert = this.alertController.create({\n            title : 'Finalize bet?'\n        });\n\n        alert.addInput({\n            type: 'radio',\n            label: 'Team 1',\n            value: '1',\n            checked: false\n        }).addInput({\n            type: 'radio',\n            label: 'Team 2',\n            value: '2',\n            checked: false\n        }).addInput({\n            type: 'radio',\n            label: 'Draw',\n            value: '3',\n            checked: false\n        }).addButton('Abort').addButton({\n            text: 'Finalize',\n            handler: data => {\n                this.sportsBettingService.finalizeBet(this.betContract, data).then(() => {\n                    this.loadData();\n                }).catch((err) => {\n                    console.error(err);\n                });\n            }\n        }).present();\n    }\n\n    payout() {\n        this.sportsBettingService.payout(this.betContract)\n            .then(() => {\n                this.loadData();\n            }).catch(() => {\n                let alert = this.alertController.create({\n                    title : 'Problem with payout' ,\n                    message : 'There was a problem with your payout, please try again.'\n                });\n                alert.addButton('Ok').present();\n            });\n    }\n\n    isOwner() {\n        return this.sportsBettingService.isOwner(this.bet.owner);\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bet-detail/bet-detail.ts"],"sourceRoot":""}